(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{44:function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",function(){return r})},45:function(t,e,n){"use strict";var r=n(8),o=n.n(r),a=n(14),i={bgColor:function(t){var e=t<50||0===t?255:Math.floor(255-255*(2*t-100)/100),n=t>50?255:Math.floor(2*t*255/100),r=isNaN(parseInt(e.toString()))?0:parseInt(e.toString()),o=isNaN(parseInt(n.toString()))?0:parseInt(n.toString());return"rgb("+r.toString()+","+o.toString()+",0)"},fontColor:function(t){return"black"},getBatteryStateText:function(t){return null!=t?!0===t?"Charging":!1===t?"Discharging":"Full":""},getBatteryLevelText:function(t){return Math.floor(100*t)+"%"},getBatteryTimeText:function(t){var e=new Date(t);return e.toLocaleDateString()+" "+e.toLocaleTimeString()},showNotification:function(){var t=Object(a.a)(o.a.mark(function t(e,n,r){var a,i,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e,i=r,s=function(){navigator.serviceWorker.getRegistration().then(function(t){var e={body:i,icon:n,vibrate:[100,50,100],data:{dateOfArrival:Date.now(),primaryKey:1}};t.showNotification(a,e)})},window.Notification&&"granted"===Notification.permission?s():window.Notification&&"denied"!==Notification.permission?Notification.requestermission(function(t){"granted"===t?s():console.log("permission not granted - 2")}):console.log("permission not granted - 1");case 4:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}()};e.a=i},46:function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return(o="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)})(t)}function a(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}n.d(e,"a",function(){return a})},47:function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}n.d(e,"a",function(){return o})},57:function(t,e,n){"use strict";n.r(e);var r=n(5),o=n(8),a=n.n(o),i=n(18),s=n(14),c=n(15),u=n(16),l=n(46),f=n(44),p=n(47),d=n(1),y=n.n(d),m=n(6),b=n(23),h=n.n(b),g=n(45);function w(){var t=Object(r.a)(["\n.App {\n  text-align: center;\n}\n\n.App-body {\n  background-color: #282c34;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n.circle {\n  width:45vmax;\n  height:45vmax;\n  border-radius:50%;\n  box-sizing: border-box;\n  position:relative;\n  background:rgb(240, 16, 102);\n  color: black;\n  font-family: Helvetica, Arial Black, sans;\n  border:solid 0px greenyellow;\n  transform: scale(1);\n  transition:transform ease-in-out 250;\n}\n\n.circle:hover {\n  transform:scale(1.010);\n}\n\n.innerCircleContents {\n  margin:auto;\n  padding:25% 0;\n  width:100%;\n  height:50%;\n  place-items:center;\n  display: grid;\n  grid-auto-flow:row;\n  grid-gap: 5px;\n}\n\n.contentHeader {\n  width:50%;\n  border:0px solid greenyellow;\n  font-size: calc(8px + 4vmin);\n}\n\n.contentBody {\n  width:100%;\n  border:0px solid greenyellow;\n  font-size: calc(8px + 20vmin);\n}\n\n.contentFooter {\n  border:0px solid greenyellow;\n  width:50%;\n  font-size: calc(8px + 2vmin);\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n}\n\n#snackbar {\n  visibility: hidden; /* Hidden by default. Visible on click */\n  // min-width: 280px; /* Set a default minimum width */\n  // margin-left: -140px; /* Divide value of min-width by 2 */\n  width:50vw;\n  background-color: greenyellow; /* Black background color */\n  color: black; /* White text color */\n  text-align: center; /* Centered text */\n  border-radius: 2px; /* Rounded borders */\n  padding: 12px; /* Padding */\n  position: fixed; /* Sit on top of the screen */\n  z-index: 1; /* Add a z-index if needed */\n  left: 25%; /* Center the snackbar */\n  bottom: 30px; /* 30px from the bottom */\n  font-size:.8em;\n}\n"]);return w=function(){return t},t}var v=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(l.a)(this,Object(f.a)(e).call(this,t))).timerInterval=0,n.userModel=null,n.userState=null,n.workerProcess=null,n.setBatteryState=function(){var t=Object(s.a)(a.a.mark(function t(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.setState({userState:n.userModel.setUserState(n.userState=Object(i.a)({},n.userState,e))});case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),n.getBatteryAPI=Object(s.a)(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.getBattery().then(function(t){return n.setBatteryState({batteryLevel:t.level,batteryState:t.charging,currBatteryTime:Date.now()})});case 2:case"end":return t.stop()}},t,this)})),n.registerNotificationwithAccess=Object(s.a)(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:window.Notification&&"granted"!==Notification.permission&&Notification.requestPermission(function(t){Notification.permission!==t&&(Notification.permission=t)});case 1:case"end":return t.stop()}},t,this)})),n.callNotification=Object(s.a)(a.a.mark(function t(){var e;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Notification called @ "+g.a.getBatteryTimeText(n.userState.currBatteryTime)),e=g.a.getBatteryStateText(n.userState.notifyBatteryState)+" with "+n.userState.notifyBatteryLevel.toString()+"% is now complete.",t.next=4,g.a.showNotification(n.props.AppTitle,h.a,e);case 4:console.log("Notification posted @ "+g.a.getBatteryTimeText(n.userState.currBatteryTime));case 5:case"end":return t.stop()}},t,this)})),n.state={userState:n.props.Model.state},n.userModel=n.props.Model,console.log("Home - "+Object.getOwnPropertyNames(n.props.Model)),n.userState=n.props.Model.state,console.log("User state - "+n.userState),n}return Object(p.a)(e,t),Object(u.a)(e,[{key:"onWorkerMessage",value:function(){var t=Object(s.a)(a.a.mark(function t(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.setBatteryState({workerProcess:{instance:this.workerProcess,started:!1}}),this.callNotification(),console.log(g.a.getBatteryTimeText(Date.now())+" : "+e.data);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=Object(s.a)(a.a.mark(function t(){var e,n=this;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:"getBattery"in navigator?console.log(g.a.getBatteryTimeText(this.userState.currBatteryTime)+" - The Battery Status API is supported on this platform."):(e='<span>Battery API is not supported in current browser, please try the link in <a target="blank" href="https://www.google.com/chrome/">Chrome</a> browser</span>',this.refs.snackbar.innerHTML=e,this.refs.snackbar.style.visibility="visible",console.log(e)),this.timerInterval=setInterval(Object(s.a)(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getBatteryAPI();case 2:!1===n.userState.notificationSent&&n.userState.batteryState===n.userState.notifyBatteryState&&100*n.userState.batteryLevel===n.userState.notifyBatteryLevel?(n.callNotification(),n.setBatteryState({notificationSent:!0})):n.userState.batteryState===n.userState.notifyBatteryState&&(n.userState.batteryState&&100*n.userState.batteryLevel>=n.userState.notifyBatteryLevel||!n.userState.batteryState&&(n.userState.batteryLevel,n.userState.notifyBatteryLevel));case 3:case"end":return t.stop()}},t,this)})),1e3),this.registerNotificationwithAccess();case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.timerInterval),this.setBatteryState({workerProcess:{instance:this.workerProcess,started:!0}}),console.log("did unmount process status:",this.userState.workerProcess.started),this.workerProcess=null,console.log("background worker process is still working although home component is unmounted")}},{key:"render",value:function(){var t=100*this.userState.batteryLevel;return y.a.createElement(S,null,y.a.createElement("div",{className:"App App-body animated heartBeat"},y.a.createElement("div",{className:"circle animated shake delay-1s",style:{backgroundColor:g.a.bgColor(t),color:g.a.fontColor(t)}},y.a.createElement("div",{className:"innerCircleContents"},y.a.createElement("div",{className:"contentHeader",ref:"contentHeader"},g.a.getBatteryStateText(this.userState.batteryState)),y.a.createElement("div",{className:"contentBody animated flash",ref:"contentBody"},g.a.getBatteryLevelText(this.userState.batteryLevel)),y.a.createElement("div",{className:"contentFooter",ref:"contentFooter"},g.a.getBatteryTimeText(this.userState.currBatteryTime))))),y.a.createElement("div",{ref:"snackbar",id:"snackbar",className:"animated fadeInUpBig delay-2s"},"Some text some message.."))}}]),e}(d.Component),S=m.a.div(w());e.default=v}}]);
//# sourceMappingURL=2.a4bb6896.chunk.js.map