{"version":3,"sources":["Components/Home.js"],"names":["Home","props","_this","Object","C_Users_Nilesh_OneDrive_Documents_VSCodeProjects_reactjsbatterynotifier_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__","this","C_Users_Nilesh_OneDrive_Documents_VSCodeProjects_reactjsbatterynotifier_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__","C_Users_Nilesh_OneDrive_Documents_VSCodeProjects_reactjsbatterynotifier_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__","call","timerInterval","userModel","userState","workerProcess","setBatteryState","_ref","C_Users_Nilesh_OneDrive_Documents_VSCodeProjects_reactjsbatterynotifier_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__","C_Users_Nilesh_OneDrive_Documents_VSCodeProjects_reactjsbatterynotifier_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","a","mark","_callee","batteryOptions","wrap","_context","prev","next","setState","setUserState","C_Users_Nilesh_OneDrive_Documents_VSCodeProjects_reactjsbatterynotifier_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__","stop","_x","apply","arguments","getBatteryAPI","_callee2","_context2","navigator","console","log","Utils","getBatteryTimeText","currBatteryTime","getBattery","then","battery","batteryLevel","level","batteryState","charging","Date","now","registerNotificationwithAccess","_callee3","_context3","window","Notification","permission","requestPermission","status","state","Model","getOwnPropertyNames","ev","instance","started","callNotification","data","alert","notificationBody","getBatteryStateText","notifyBatteryState","notifyBatteryLevel","toString","showNotification","Apptitle","logo","_this2","setInterval","_callee6","_context6","notificationSent","clearInterval","react__WEBPACK_IMPORTED_MODULE_9___default","createElement","Wrapper","className","style","backgroundColor","bgColor","color","fontColor","ref","getBatteryLevelText","Component","styled","div","_templateObject"],"mappings":"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","file":"static/js/3.0f992a65.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport styled from \"styled-components\";\nimport logo from \"../assets/ic_launcher.png\";\nimport Utils from './Utils';\n\nclass Home extends Component {\n\n  timerInterval = 0;\n  userModel = null;\n  userState = null;\n  workerProcess = null;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      userState : this.props.Model.state\n    }\n    this.userModel = this.props.Model;\n    console.log('Home - ' + Object.getOwnPropertyNames(this.props.Model));\n    this.userState = this.props.Model.state;\n    console.log('User state - ' + this.userState);\n  }\n\n  async onWorkerMessage(ev) {\n    this.setBatteryState({workerProcess: { instance: this.workerProcess, started: false }})\n    this.callNotification();\n    console.log(Utils.getBatteryTimeText(Date.now()) + ' : ' + ev.data);\n  }\n\n  setBatteryState = async (batteryOptions) => {\n    this.setState({\n      userState: this.userModel.setUserState(\n        this.userState = {\n          ...this.userState,\n          ...batteryOptions,\n        }\n      )\n    },);\n  }\n\n  getBatteryAPI = async () => {\n    if ('getBattery' in navigator) {\n      console.log(Utils.getBatteryTimeText(this.userState.currBatteryTime) + ' - The Battery Status API is supported on this platform.');\n      console.log(this.userState);\n      await navigator.getBattery().then(battery => this.setBatteryState({ batteryLevel: battery.level, batteryState: battery.charging, currBatteryTime: Date.now(), }));\n    } \n    else {\n      console.log('The Battery API is not supported on this platform');\n    }\n  }\n\n  registerNotificationwithAccess = async () => {\n    if (window.Notification && Notification.permission !== \"granted\") {\n      Notification.requestPermission(function (status) {\n        if (Notification.permission !== status) {\n          Notification.permission = status;\n        }\n      });\n    }\n  }\n\n  async callNotification() {\n    alert('Notification called @ '+ Utils.getBatteryTimeText(this.userState.currBatteryTime));\n    console.log('Notification called @ '+ Utils.getBatteryTimeText(this.userState.currBatteryTime));\n    const notificationBody = Utils.getBatteryStateText(this.userState.notifyBatteryState) + ' with ' + this.userState.notifyBatteryLevel.toString() + '% is now complete.';\n    await Utils.showNotification(this.props.Apptitle, logo, notificationBody);\n    console.log('Notification posted @ '+ Utils.getBatteryTimeText(this.userState.currBatteryTime));\n    alert('Notification posted @ '+ Utils.getBatteryTimeText(this.userState.currBatteryTime));\n  }\n \n  componentDidMount() {\n    this.timerInterval = setInterval(async () => { \n      await this.getBatteryAPI() \n      if(this.userState.notificationSent === false && this.userState.batteryState === this.userState.notifyBatteryState && this.userState.batteryLevel*100 === this.userState.notifyBatteryLevel) {\n        this.callNotification();\n        this.setBatteryState({ notificationSent : true })\n        clearInterval(this.timerInterval);\n      }\n      else if(this.userState.batteryState === this.userState.notifyBatteryState \n        && ((this.userState.batteryState && this.userState.batteryLevel*100 >= this.userState.notifyBatteryLevel) \n            || (!this.userState.batteryState && this.userState.batteryLevel*100 <= this.userState.notifyBatteryLevel))) {\n        clearInterval(this.timerInterval);\n      }\n    }, 1000);\n\n    this.registerNotificationwithAccess();\n    //setTimeout(() => this.callNotification(), 5000);\n    \n    // if(this.userState.workerProcess !== undefined && this.workerProcess === null) {\n    //   this.workerProcess = this.userState.workerProcess.instance;\n    //   console.log('did mount process status:', this.userState.workerProcess.started);\n    //   if(!this.userState.workerProcess.started) {\n    //     let obj = {'cmd': 'start', 'msg': 'from Home component'};\n    //     this.workerProcess.postMessage(obj);\n    //     this.setBatteryState({ workerProcess: { instance: this.workerProcess, started: true }});\n    //     console.log('background worker process started');\n    //   }\n    //   this.workerProcess.addEventListener('message', (e) => this.onWorkerMessage(e));\n    //   console.log('background worker onmessage attached');\n    // }\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerInterval);\n    //this.workerProcess.postMessage({'cmd': 'stop', 'msg': 'from main thread'});\n    this.setBatteryState({ workerProcess: { instance: this.workerProcess, started: true }});\n    console.log('did unmount process status:', this.userState.workerProcess.started);\n    this.workerProcess = null;\n    console.log('background worker process is still working although home component is unmounted');\n}\n\n  render() {     \n    const batteryLevel = this.userState.batteryLevel*100;\n    return (\n      <Wrapper>\n        <div className=\"App App-body\">\n            <div className=\"circle\" \n                style={{ backgroundColor: Utils.bgColor(batteryLevel)\n                        , color: Utils.fontColor(batteryLevel) }} >\n              <div className=\"innerCircleContents\" >\n                <div className=\"contentHeader\" ref=\"contentHeader\">\n                  {Utils.getBatteryStateText(this.userState.batteryState)}\n                </div>\n                <div className=\"contentBody\" ref=\"contentBody\">\n                  {Utils.getBatteryLevelText(this.userState.batteryLevel)}\n                </div>\n                <div className=\"contentFooter\" ref=\"contentFooter\">\n                  {Utils.getBatteryTimeText(this.userState.currBatteryTime)}\n                </div>\n              </div>\n            </div>\n            {/* <p>\n              Edit <code>src/App.js</code> and save to reload.\n            </p>\n            <a\n              className=\"App-link\"\n              href=\"https://reactjs.org\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Learn React\n            </a> */}\n        </div>\n      </Wrapper>\n    );\n  }\n}\n\nconst Wrapper = styled.div`\n.App {\n  text-align: center;\n}\n\n.App-body {\n  background-color: #282c34;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n.circle {\n  width:45vmax;\n  height:45vmax;\n  border-radius:50%;\n  box-sizing: border-box;\n  position:relative;\n  background:rgb(240, 16, 102);\n  color: black;\n  font-family: Helvetica, Arial Black, sans;\n  border:solid 0px greenyellow;\n  transform: scale(1);\n  transition:transform ease-in-out 250;\n}\n\n.circle:hover {\n  transform:scale(1.010);\n}\n\n.innerCircleContents {\n  margin:auto;\n  padding:25% 0;\n  width:100%;\n  height:50%;\n  place-items:center;\n  display: grid;\n  grid-auto-flow:row;\n  grid-gap: 5px;\n}\n\n.contentHeader {\n  width:50%;\n  border:0px solid greenyellow;\n  font-size: calc(8px + 4vmin);\n}\n\n.contentBody {\n  width:100%;\n  border:0px solid greenyellow;\n  font-size: calc(8px + 20vmin);\n}\n\n.contentFooter {\n  border:0px solid greenyellow;\n  width:50%;\n  font-size: calc(8px + 2vmin);\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n}\n`\nexport default Home;\n"],"sourceRoot":""}