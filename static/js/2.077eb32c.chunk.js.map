{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","Components/Utils.js","../node_modules/idb/lib/idb.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","Components/ToastMessage.js","Components/Home.js"],"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","_arrayWithoutHoles","iter","Symbol","iterator","Object","prototype","toString","call","from","_iterableToArray","TypeError","_nonIterableSpread","__webpack_require__","d","__webpack_exports__","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","Utils","bgColor","percent","r","Math","floor","g","parsedRColor","isNaN","parseInt","parsedGColor","fontColor","getBatteryStateText","batState","getBatteryLevelText","batLvl","getBatteryTimeText","timeTxt","dateVal","Date","toLocaleDateString","toLocaleTimeString","showNotification","_showNotification","C_Users_Nilesh_OneDrive_Documents_VSCodeProjects_reactjsbatterynotifier_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__","C_Users_Nilesh_OneDrive_Documents_VSCodeProjects_reactjsbatterynotifier_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","a","mark","_callee10","title","logo","body","appTitle","text","notifyWithNoSW","notifywithSWReadyRegister","notifywithGetRegister","callNotify","wrap","_context10","prev","next","_ref","_callee","_context","Notification","icon","tag","t0","console","log","concat","abrupt","stop","this","apply","arguments","_ref2","_callee4","_context4","navigator","serviceWorker","ready","then","_ref3","_callee2","registration","_context2","vibrate","_x4","catch","_ref4","_callee3","err","_context3","sent","_x5","_ref5","_callee7","_context7","getRegistration","_ref6","_callee5","_context5","undefined","data","dateOfArrival","now","primaryKey","_x6","_ref7","_callee6","_context6","_x7","_ref8","_callee8","_context8","t1","window","permission","requestermission","_ref9","_callee9","status","_context9","_x8","_x","_x2","_x3","getDbContext","_getDbContext","_callee11","_context11","idb","open","upgradeDB","oldVersion","createObjectStore","keyPath","autoIncrement","storeItemsLocally","_storeItemsLocally","_callee12","dbcontext","obj","_context12","db","tx","transaction","objectStore","clear","put","C_Users_Nilesh_OneDrive_Documents_VSCodeProjects_reactjsbatterynotifier_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","complete","_x9","_x10","getItemsLocally","_getItemsLocally","_callee13","listItems","_context13","Set","getAll","allObjs","C_Users_Nilesh_OneDrive_Documents_VSCodeProjects_reactjsbatterynotifier_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","map","s","add","_x11","logText","_len","rest","_key","promisifyRequest","request","Promise","resolve","reject","onsuccess","result","onerror","error","promisifyRequestCall","method","args","p","proxyProperties","ProxyClass","targetProp","properties","forEach","prop","defineProperty","get","set","val","proxyRequestMethods","Constructor","proxyMethods","proxyCursorRequestMethods","value","Cursor","promisifyCursorRequestCall","Index","index","_index","cursor","_cursor","_request","ObjectStore","store","_store","Transaction","idbTransaction","_tx","oncomplete","onabort","UpgradeDB","_db","DB","IDBIndex","IDBCursor","methodName","createIndex","IDBObjectStore","IDBTransaction","IDBDatabase","funcName","replace","slice","callback","nativeObject","query","count","instance","items","iterateCursor","push","continue","exp","name","version","upgradeCallback","indexedDB","onupgradeneeded","event","delete","module","exports","default","_typeof2","constructor","_typeof","_possibleConstructorReturn","self","ReferenceError","_assertThisInitialized","_setPrototypeOf","_inherits","subClass","superClass","create","writable","configurable","Wrapper","styled","div","_templateObject","ToastMessage","props","react_default","createElement","className","classname","style","visibility","show","toConsumableArray","message","key","Home","_this","classCallCheck","possibleConstructorReturn","timerInterval","userModel","userState","workerProcess","setBatteryState","asyncToGenerator","regenerator_default","batteryOptions","setState","setUserState","objectSpread","getBatteryAPI","getBattery","battery","batteryLevel","level","batteryState","charging","currBatteryTime","registerNotificationwithAccess","toastMessage","state","requestPermission","callNotification","notificationBody","notifyBatteryState","notifyBatteryLevel","AppTitle","getChangesLocally","localValues","Model","getOwnPropertyNames","ev","started","target","href","setInterval","_this2","notificationSent","clearInterval","Home_Wrapper","backgroundColor","color","ref","Components_ToastMessage","React","Component","Home_templateObject"],"mappings":"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","file":"static/js/2.077eb32c.chunk.js","sourcesContent":["import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import idb from \"idb\";\r\nlet Utils = {\r\n\r\n    bgColor: (percent) => {\r\n        const r = percent < 50 || percent === 0 ? 255 : Math.floor(255-(percent*2-100)*255/100);\r\n        const g = percent > 50 ? 255 : Math.floor(((percent*2)*255)/100);\r\n        const parsedRColor = !isNaN(parseInt(r.toString())) ? parseInt(r.toString()) : 0;\r\n        const parsedGColor = !isNaN(parseInt(g.toString())) ? parseInt(g.toString()) : 0;\r\n        //console.log('bgColor for '+ percent.toString() +' : rgb(' + parsedRColor.toString() + ',' + parsedGColor.toString() + ',0)');\r\n        return 'rgb(' + parsedRColor.toString() + ',' + parsedGColor.toString() + ',0)';\r\n    },\r\n\r\n    fontColor: (percent) => {\r\n        return 'black';//(percent >= 45 && percent <= 60) ? 'black' : 'white';\r\n    },\r\n\r\n    getBatteryStateText: (batState) => {\r\n\t\tif (batState != null) {\r\n\t\t\tif (batState === true) {\r\n\t\t\t\treturn 'Charging';\r\n\t\t\t} else if (batState === false) {\r\n\t\t\t\treturn 'Discharging';\r\n\t\t\t} else {\r\n\t\t\t\treturn 'Full';\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t},\r\n\r\n\tgetBatteryLevelText: (batLvl) => {\r\n\t\treturn Math.floor(batLvl * 100) + '%';\r\n\t},\r\n\r\n\tgetBatteryTimeText: (timeTxt) => {\r\n\t\tconst dateVal = new Date(timeTxt)\r\n\t\treturn dateVal.toLocaleDateString() + ' ' + dateVal.toLocaleTimeString();\r\n\t},\r\n\r\n\tshowNotification: async (title, logo, body) => {\r\n\t\tconst appTitle = title;\r\n\t\tconst text = body;\r\n\t\tconst notifyWithNoSW = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tnew Notification(appTitle+':NoSW', {\r\n\t\t\t\t\tbody: text,\r\n\t\t\t\t\ticon: logo,\r\n\t\t\t\t\ttag: 'soManyNotification'\r\n\t\t\t\t});\t\t\t\t\t\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.log(`Error for new Notification : ${err}`);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tconst notifywithSWReadyRegister = async () => {\r\n\t\t\tnavigator.serviceWorker.ready\r\n\t\t\t\t.then(async (registration) => {\r\n\t\t\t\t\tregistration.showNotification(appTitle+':SWReady', {\r\n\t\t\t\t\t\tbody: text,\r\n\t\t\t\t\t\ticon: logo,\r\n\t\t\t\t\t\tvibrate: [200, 100, 200, 100, 200, 100, 200],\r\n\t\t\t\t\t\ttag: title\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch(async err => {\r\n\t\t\t\t\tconsole.log(`Error for notifywithSWReadyRegister : ${err}`);\r\n\t\t\t\t\treturn await notifyWithNoSW();\r\n\t\t\t\t});\r\n\t\t\t\treturn true;\r\n\t\t};\t\r\n\r\n\t\tconst notifywithGetRegister = async () => {\r\n\t\t\tnavigator.serviceWorker.getRegistration().then(async (registration) => {\r\n\t\t\t\tconsole.log('SW registration : ', registration)\r\n\t\t\t\tif(registration !== undefined) {\r\n\t\t\t\t\tregistration.showNotification(appTitle+':SWGRegister', {\r\n\t\t\t\t\t\tbody: text,\r\n\t\t\t\t\t\ticon: logo,\r\n\t\t\t\t\t\tvibrate: [100, 50, 100],\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tdateOfArrival: Date.now(),\r\n\t\t\t\t\t\t\tprimaryKey: 1\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// actions: [\r\n\t\t\t\t\t\t// \t{action: 'explore', title: 'Explore this new world',\r\n\t\t\t\t\t\t// \t\ticon: 'images/checkmark.png'},\r\n\t\t\t\t\t\t// \t{action: 'close', title: 'Close notification',\r\n\t\t\t\t\t\t// \t\ticon: 'images/xmark.png'},\r\n\t\t\t\t\t\t// ]\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn await notifywithSWReadyRegister();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(async err => {\r\n\t\t\t\tconsole.log(`Error for notifywithGetRegister : ${err}`)\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tconst callNotify = async () => {\r\n\t\t\tif(await navigator.serviceWorker.getRegistration() !== undefined) {\r\n\t\t\t\treturn await(notifywithSWReadyRegister() || notifywithGetRegister())\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn await notifyWithNoSW(); \r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\r\n\t\tif (window.Notification && Notification.permission === \"granted\") {\r\n\t\t\treturn await callNotify();\r\n\t\t} else if (window.Notification && Notification.permission !== \"denied\") {\r\n\t\t\tNotification.requestermission(async (status) => {\r\n\t\t\t\tif (status === \"granted\") {\r\n\t\t\t\t\treturn await callNotify();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"permission not granted - 2\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tconsole.log(\"permission not granted - 1\");\r\n\t\t}\r\n\t},\r\n\r\n\tgetDbContext: async () => {\r\n    return idb.open('BatteryNotifierDatabase', 1, upgradeDB => {\r\n      switch (upgradeDB.oldVersion) {\r\n        case 1:\r\n          upgradeDB.createObjectStore('BatteryNotifierList', {keyPath: 'id', autoIncrement:true});\r\n          break;\r\n        default:\r\n          upgradeDB.createObjectStore('BatteryNotifierList', {keyPath: 'id', autoIncrement:true});  \r\n      }\r\n    });\r\n  },\r\n\r\n  storeItemsLocally: async (dbcontext, obj) => {\r\n    dbcontext\r\n        .then(db => {\r\n          const tx = db.transaction('BatteryNotifierList', 'readwrite');\r\n          tx.objectStore('BatteryNotifierList').clear();\r\n\t\t\t\t\ttx.objectStore('BatteryNotifierList').put({...obj})\r\n          return tx.complete;\r\n        })\r\n        .catch(err => {\r\n          console.log(`Error: ${err}`)\r\n          return false;\r\n        });\r\n  },\r\n\r\n  getItemsLocally: async (dbcontext) => {\r\n    let listItems = new Set();\r\n    return dbcontext\r\n\t\t\t\t\t\t.then(db => {\r\n\t\t\t\t\t\t\treturn db.transaction('BatteryNotifierList').objectStore('BatteryNotifierList').getAll();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(allObjs => {\r\n\t\t\t\t\t\t\t[...allObjs].map(s => listItems.add({ ...s }));\r\n\t\t\t\t\t\t\treturn listItems;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\tconsole.log(`Error: ${err}`)\r\n\t\t\t\t\t\t\treturn listItems;\r\n\t\t\t\t\t\t});\r\n\t},\r\n\t\r\n\tlogText: (...rest) => console.log(rest)\r\n\r\n}\r\n\r\nexport default Utils;\r\n","'use strict';\n\n(function () {\n  function toArray(arr) {\n    return Array.prototype.slice.call(arr);\n  }\n\n  function promisifyRequest(request) {\n    return new Promise(function (resolve, reject) {\n      request.onsuccess = function () {\n        resolve(request.result);\n      };\n\n      request.onerror = function () {\n        reject(request.error);\n      };\n    });\n  }\n\n  function promisifyRequestCall(obj, method, args) {\n    var request;\n    var p = new Promise(function (resolve, reject) {\n      request = obj[method].apply(obj, args);\n      promisifyRequest(request).then(resolve, reject);\n    });\n    p.request = request;\n    return p;\n  }\n\n  function promisifyCursorRequestCall(obj, method, args) {\n    var p = promisifyRequestCall(obj, method, args);\n    return p.then(function (value) {\n      if (!value) return;\n      return new Cursor(value, p.request);\n    });\n  }\n\n  function proxyProperties(ProxyClass, targetProp, properties) {\n    properties.forEach(function (prop) {\n      Object.defineProperty(ProxyClass.prototype, prop, {\n        get: function get() {\n          return this[targetProp][prop];\n        },\n        set: function set(val) {\n          this[targetProp][prop] = val;\n        }\n      });\n    });\n  }\n\n  function proxyRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function (prop) {\n      if (!(prop in Constructor.prototype)) return;\n\n      ProxyClass.prototype[prop] = function () {\n        return promisifyRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function proxyMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function (prop) {\n      if (!(prop in Constructor.prototype)) return;\n\n      ProxyClass.prototype[prop] = function () {\n        return this[targetProp][prop].apply(this[targetProp], arguments);\n      };\n    });\n  }\n\n  function proxyCursorRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function (prop) {\n      if (!(prop in Constructor.prototype)) return;\n\n      ProxyClass.prototype[prop] = function () {\n        return promisifyCursorRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function Index(index) {\n    this._index = index;\n  }\n\n  proxyProperties(Index, '_index', ['name', 'keyPath', 'multiEntry', 'unique']);\n  proxyRequestMethods(Index, '_index', IDBIndex, ['get', 'getKey', 'getAll', 'getAllKeys', 'count']);\n  proxyCursorRequestMethods(Index, '_index', IDBIndex, ['openCursor', 'openKeyCursor']);\n\n  function Cursor(cursor, request) {\n    this._cursor = cursor;\n    this._request = request;\n  }\n\n  proxyProperties(Cursor, '_cursor', ['direction', 'key', 'primaryKey', 'value']);\n  proxyRequestMethods(Cursor, '_cursor', IDBCursor, ['update', 'delete']); // proxy 'next' methods\n\n  ['advance', 'continue', 'continuePrimaryKey'].forEach(function (methodName) {\n    if (!(methodName in IDBCursor.prototype)) return;\n\n    Cursor.prototype[methodName] = function () {\n      var cursor = this;\n      var args = arguments;\n      return Promise.resolve().then(function () {\n        cursor._cursor[methodName].apply(cursor._cursor, args);\n\n        return promisifyRequest(cursor._request).then(function (value) {\n          if (!value) return;\n          return new Cursor(value, cursor._request);\n        });\n      });\n    };\n  });\n\n  function ObjectStore(store) {\n    this._store = store;\n  }\n\n  ObjectStore.prototype.createIndex = function () {\n    return new Index(this._store.createIndex.apply(this._store, arguments));\n  };\n\n  ObjectStore.prototype.index = function () {\n    return new Index(this._store.index.apply(this._store, arguments));\n  };\n\n  proxyProperties(ObjectStore, '_store', ['name', 'keyPath', 'indexNames', 'autoIncrement']);\n  proxyRequestMethods(ObjectStore, '_store', IDBObjectStore, ['put', 'add', 'delete', 'clear', 'get', 'getAll', 'getKey', 'getAllKeys', 'count']);\n  proxyCursorRequestMethods(ObjectStore, '_store', IDBObjectStore, ['openCursor', 'openKeyCursor']);\n  proxyMethods(ObjectStore, '_store', IDBObjectStore, ['deleteIndex']);\n\n  function Transaction(idbTransaction) {\n    this._tx = idbTransaction;\n    this.complete = new Promise(function (resolve, reject) {\n      idbTransaction.oncomplete = function () {\n        resolve();\n      };\n\n      idbTransaction.onerror = function () {\n        reject(idbTransaction.error);\n      };\n\n      idbTransaction.onabort = function () {\n        reject(idbTransaction.error);\n      };\n    });\n  }\n\n  Transaction.prototype.objectStore = function () {\n    return new ObjectStore(this._tx.objectStore.apply(this._tx, arguments));\n  };\n\n  proxyProperties(Transaction, '_tx', ['objectStoreNames', 'mode']);\n  proxyMethods(Transaction, '_tx', IDBTransaction, ['abort']);\n\n  function UpgradeDB(db, oldVersion, transaction) {\n    this._db = db;\n    this.oldVersion = oldVersion;\n    this.transaction = new Transaction(transaction);\n  }\n\n  UpgradeDB.prototype.createObjectStore = function () {\n    return new ObjectStore(this._db.createObjectStore.apply(this._db, arguments));\n  };\n\n  proxyProperties(UpgradeDB, '_db', ['name', 'version', 'objectStoreNames']);\n  proxyMethods(UpgradeDB, '_db', IDBDatabase, ['deleteObjectStore', 'close']);\n\n  function DB(db) {\n    this._db = db;\n  }\n\n  DB.prototype.transaction = function () {\n    return new Transaction(this._db.transaction.apply(this._db, arguments));\n  };\n\n  proxyProperties(DB, '_db', ['name', 'version', 'objectStoreNames']);\n  proxyMethods(DB, '_db', IDBDatabase, ['close']); // Add cursor iterators\n  // TODO: remove this once browsers do the right thing with promises\n\n  ['openCursor', 'openKeyCursor'].forEach(function (funcName) {\n    [ObjectStore, Index].forEach(function (Constructor) {\n      // Don't create iterateKeyCursor if openKeyCursor doesn't exist.\n      if (!(funcName in Constructor.prototype)) return;\n\n      Constructor.prototype[funcName.replace('open', 'iterate')] = function () {\n        var args = toArray(arguments);\n        var callback = args[args.length - 1];\n        var nativeObject = this._store || this._index;\n        var request = nativeObject[funcName].apply(nativeObject, args.slice(0, -1));\n\n        request.onsuccess = function () {\n          callback(request.result);\n        };\n      };\n    });\n  }); // polyfill getAll\n\n  [Index, ObjectStore].forEach(function (Constructor) {\n    if (Constructor.prototype.getAll) return;\n\n    Constructor.prototype.getAll = function (query, count) {\n      var instance = this;\n      var items = [];\n      return new Promise(function (resolve) {\n        instance.iterateCursor(query, function (cursor) {\n          if (!cursor) {\n            resolve(items);\n            return;\n          }\n\n          items.push(cursor.value);\n\n          if (count !== undefined && items.length == count) {\n            resolve(items);\n            return;\n          }\n\n          cursor.continue();\n        });\n      });\n    };\n  });\n  var exp = {\n    open: function open(name, version, upgradeCallback) {\n      var p = promisifyRequestCall(indexedDB, 'open', [name, version]);\n      var request = p.request;\n\n      if (request) {\n        request.onupgradeneeded = function (event) {\n          if (upgradeCallback) {\n            upgradeCallback(new UpgradeDB(request.result, event.oldVersion, request.transaction));\n          }\n        };\n      }\n\n      return p.then(function (db) {\n        return new DB(db);\n      });\n    },\n    delete: function _delete(name) {\n      return promisifyRequestCall(indexedDB, 'deleteDatabase', [name]);\n    }\n  };\n\n  if (typeof module !== 'undefined') {\n    module.exports = exp;\n    module.exports.default = module.exports;\n  } else {\n    self.idb = exp;\n  }\n})();","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nexport default function _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nfunction ToastMessage(props) {\r\n  return (\r\n    <Wrapper className={props.classname} style={{ visibility: props.show }} >\r\n      {[...props.message].map((text, index) => <div key={index} >{text}</div>)}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n \r\n  visibility: hidden; /* Hidden by default. Visible on click */\r\n  // min-width: 280px; /* Set a default minimum width */\r\n  // margin-left: -140px; /* Divide value of min-width by 2 */\r\n  width:50vw;\r\n  background-color: rgba(255, 255, 153, .8); /* background color */\r\n  color: black; /* text color */\r\n  text-align: center; /* Centered text */\r\n  border-radius: 5px; /* Rounded borders */\r\n  padding: 12px; /* Padding */\r\n  position: fixed; /* Sit on top of the screen */\r\n  z-index: 1; /* Add a z-index if needed */\r\n  left: 25%; /* Center the snackbar */\r\n  bottom: 30px; /* 30px from the bottom */\r\n  font-size:.8em;\r\n\r\n`;\r\n\r\nexport default ToastMessage\r\n","import React from 'react';\nimport styled from \"styled-components\";\nimport logo from \"../assets/ic_launcher.png\";\nimport Utils from './Utils';\nimport ToastMessage from \"./ToastMessage\";\n\nclass Home extends React.Component {\n\n  timerInterval = 0;\n  userModel = null;\n  userState = null;\n  workerProcess = null;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      userState : this.props.Model.state,\n      toastMessage: '',\n    }\n    this.userModel = this.props.Model;\n    console.log('Home - ' + Object.getOwnPropertyNames(this.props.Model));\n    this.userState = this.props.Model.state;\n    console.log('User state - ' + this.userState);\n  }\n\n  async onWorkerMessage(ev) {\n    this.setBatteryState({workerProcess: { instance: this.workerProcess, started: false }})\n    this.callNotification();\n    console.log(Utils.getBatteryTimeText(Date.now()) + ' : ' + ev.data);\n  }\n\n  setBatteryState = async (batteryOptions) => {\n    this.setState({\n      userState: this.userModel.setUserState(\n        this.userState = {\n          ...this.userState,\n          ...batteryOptions,\n        }\n      )\n    },);\n  }\n\n  getBatteryAPI = async () => {\n      //console.log(this.userState);\n      await navigator.getBattery().then(battery => this.setBatteryState({ batteryLevel: battery.level, batteryState: battery.charging, currBatteryTime: Date.now(), }));\n  }\n\n  registerNotificationwithAccess = async () => {\n    if (window.Notification && Notification.permission !== \"granted\") {\n      this.setState({ toastMessage: [<span>Kindly grant notification access for this app to work</span>] }\n        , () => console.log('toastmessage: ',this.state.toastMessage));\n      Notification.requestPermission(function (status) {\n        if (Notification.permission !== status) {\n          Notification.permission = status;\n        }\n      }).then(status => {\n        console.log('Notification Status : ',status)\n        if(status === 'granted') {\n          this.setState({ toastMessage: '' }\n          , () => console.log('toastmessage: ',this.state.toastMessage)); \n        }             \n      });\n    }\n  }\n\n  callNotification = async () => {\n    console.log('Notification called @ '+ Utils.getBatteryTimeText(this.userState.currBatteryTime));\n    const notificationBody = Utils.getBatteryStateText(this.userState.notifyBatteryState) + ' with ' + this.userState.notifyBatteryLevel.toString() + '% is now complete.';\n    await Utils.showNotification(this.props.AppTitle, logo, notificationBody);\n    console.log('Notification posted @ '+ Utils.getBatteryTimeText(this.userState.currBatteryTime));\n  }\n\n  getChangesLocally = async () => {\n    console.log('checking for local values ..');\n    const localValues = await Utils.getItemsLocally(Utils.getDbContext());\n    console.log('local values count : ',[...localValues].length);   \n    [...localValues].forEach(s => {\n      const localValues = {notifyBatteryLevel: s.notifyBatteryLevel, notifyBatteryState: s.notifyBatteryState }\n      this.setBatteryState(localValues);\n      console.log('local value is : ',localValues);\n    })\n  }\n\n  async componentDidMount() {\n    if ('getBattery' in navigator) {\n      console.log(Utils.getBatteryTimeText(this.userState.currBatteryTime) + ' - The Battery Status API is supported on this platform.');\n      this.getChangesLocally();\n      this.registerNotificationwithAccess();\n    } \n    else {\n      this.setState({ toastMessage: [<span>Battery API is not supported in current browser, please try the link in <a target=\"blank\" href=\"https://www.google.com/chrome/\">Chrome</a> browser</span>] });\n      console.log('toastmessage: ',this.state.toastMessage);\n    }\n\n    this.timerInterval = setInterval(async () => { \n      await this.getBatteryAPI() \n      if(this.userState.notificationSent === false && this.userState.batteryState === this.userState.notifyBatteryState && this.userState.batteryLevel*100 === this.userState.notifyBatteryLevel) {\n        this.callNotification();\n        this.setBatteryState({ notificationSent : true })\n        //clearInterval(this.timerInterval);\n      }\n      else if(this.userState.batteryState === this.userState.notifyBatteryState \n        && ((this.userState.batteryState && this.userState.batteryLevel*100 >= this.userState.notifyBatteryLevel) \n            || (!this.userState.batteryState && this.userState.batteryLevel*100 <= this.userState.notifyBatteryLevel))) {\n        //clearInterval(this.timerInterval);\n      }\n    }, 1000);\n\n    //setTimeout(() => this.callNotification(), 5000);\n    \n    // if(this.userState.workerProcess !== undefined && this.workerProcess === null) {\n    //   this.workerProcess = this.userState.workerProcess.instance;\n    //   console.log('did mount process status:', this.userState.workerProcess.started);\n    //   if(!this.userState.workerProcess.started) {\n    //     let obj = {'cmd': 'start', 'msg': 'from Home component'};\n    //     this.workerProcess.postMessage(obj);\n    //     this.setBatteryState({ workerProcess: { instance: this.workerProcess, started: true }});\n    //     console.log('background worker process started');\n    //   }\n    //   this.workerProcess.addEventListener('message', (e) => this.onWorkerMessage(e));\n    //   console.log('background worker onmessage attached');\n    // }\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerInterval);\n    //this.workerProcess.postMessage({'cmd': 'stop', 'msg': 'from main thread'});\n    this.setBatteryState({ workerProcess: { instance: this.workerProcess, started: true }});\n    console.log('did unmount process status:', this.userState.workerProcess.started);\n    this.workerProcess = null;\n    console.log('background worker process is still working although home component is unmounted');\n  }\n\n  render() {     \n    const batteryLevel = this.userState.batteryLevel*100;\n    return (\n      <Wrapper>\n        <div className=\"App App-body animated heartBeat\">\n            <div className=\"circle animated shake delay-1s\" \n                style={{ backgroundColor: Utils.bgColor(batteryLevel)\n                        , color: Utils.fontColor(batteryLevel) }} >\n              <div className=\"innerCircleContents\" >\n                <div className=\"contentHeader\" ref=\"contentHeader\">\n                  {Utils.getBatteryStateText(this.userState.batteryState)}\n                </div>\n                <div className=\"contentBody animated flash\" ref=\"contentBody\">\n                  {Utils.getBatteryLevelText(this.userState.batteryLevel)}\n                </div>\n                <div className=\"contentFooter\" ref=\"contentFooter\">\n                  {Utils.getBatteryTimeText(this.userState.currBatteryTime)}\n                </div>\n              </div>\n            </div>\n        </div>\n        <ToastMessage show={this.state.toastMessage === '' ? 'hidden' : 'visible'} \n          classname=\"animated fadeInUpBig delay-2s\" message={this.state.toastMessage}></ToastMessage>\n      </Wrapper>\n    );\n  }\n}\n\nconst Wrapper = styled.div`\n.App {\n  text-align: center;  \n  background-color: #282c34;\n  min-height: 100vh;\n}\n\n.App-body {\n  display: grid;\n  place-items:center;\n}\n\n.circle {\n  width:45vmax;\n  height:45vmax;\n  border-radius:50%;\n  box-sizing: border-box;\n  position:relative;\n  background:rgb(240, 16, 102);\n  color: black;\n  font-family: Helvetica, Arial Black, sans;\n  border:solid 0px greenyellow;\n  transform: scale(1);\n  transition:transform ease-in-out 250;\n}\n\n.circle:hover {\n  transform:scale(1.010);\n}\n\n.innerCircleContents {\n  margin:auto;\n  padding:25% 0;\n  width:100%;\n  height:50%;\n  place-items:center;\n  display: grid;\n  grid-auto-flow:row;\n  grid-gap: 5px;\n}\n\n.contentHeader {\n  width:50%;\n  border:0px solid greenyellow;\n  font-size: calc(8px + 4vmin);\n}\n\n.contentBody {\n  width:100%;\n  border:0px solid greenyellow;\n  font-size: calc(8px + 20vmin);\n}\n\n.contentFooter {\n  border:0px solid greenyellow;\n  width:50%;\n  font-size: calc(8px + 2vmin);\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n}\n\n`\nexport default Home;\n"],"sourceRoot":""}